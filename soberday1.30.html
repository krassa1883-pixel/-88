<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sober Day</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background: #000;
            overflow: auto;
        }

        /* Стили для видео-заставки */
        #video-splash {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            z-index: 1000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        #splash-video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .video-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.4);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 2;
        }

        .splash-subtitle {
            color: white;
            font-size: 1.5em;
            margin-bottom: 50px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            text-align: center;
            font-style: italic;
        }

        .splash-buttons {
            display: flex;
            flex-direction: column;
            gap: 20px;
            align-items: center;
        }

        .splash-btn {
            border: none;
            padding: 20px 40px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1.3em;
            font-weight: bold;
            transition: all 0.3s ease;
            min-width: 300px;
            color: white;
            text-align: center;
            /* Прозрачные кнопки */
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .splash-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.4);
            background: rgba(255, 255, 255, 0.3);
            border-color: rgba(255, 255, 255, 0.5);
        }

        /* Стили для модальных окон */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            overflow-y: auto;
            padding: 20px;
        }

        .modal-content {
            background: white;
            padding: 40px;
            border-radius: 20px;
            max-width: 700px;
            margin: 20px;
            text-align: center;
            box-shadow: 0 15px 35px rgba(0,0,0,0.5);
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
        }

        /* Специальные стили для модального окна с информацией */
        #info-modal .modal-content {
            background: transparent;
            box-shadow: none;
            padding: 0;
            max-width: 800px;
        }

        .info-video-container {
            position: relative;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 15px 35px rgba(0,0,0,0.5);
        }

        #info-video {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 20px;
        }

        .info-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            padding: 40px;
            box-sizing: border-box;
            overflow-y: auto;
        }

        /* Специальные стили для модального окна с авторами */
        #authors-modal .modal-content {
            background: transparent;
            box-shadow: none;
            padding: 0;
            max-width: 800px;
        }

        .authors-video-container {
            position: relative;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 15px 35px rgba(0,0,0,0.5);
        }

        #authors-video {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 20px;
        }

        .authors-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            padding: 40px;
            box-sizing: border-box;
            overflow-y: auto;
        }

        /* НОВЫЕ СТИЛИ ДЛЯ ИГРОВОГО КОНТЕЙНЕРА */
        .game-container {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1000;
            overflow-y: auto;
        }

        .game-video-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        #game-video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .game-overlay {
            position: relative;
            z-index: 2;
            min-height: 100vh;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            padding: 40px 20px;
            box-sizing: border-box;
        }

        .game-content {
            max-width: 800px;
            width: 100%;
            text-align: center;
            color: white;
        }

        .modal-title {
            color: #fdbb2d;
            font-size: 2em;
            margin-bottom: 20px;
            text-align: center;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .authors-info {
            color: #fff;
            font-size: 1.2em;
            line-height: 1.6;
            margin-bottom: 30px;
        }

        .info-content {
            color: #fff;
            font-size: 1.1em;
            line-height: 1.6;
            text-align: left;
            margin-bottom: 30px;
            width: 100%;
        }

        .info-section {
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255,255,255,0.2);
        }

        .info-section h3 {
            color: #fdbb2d;
            margin-bottom: 15px;
            font-size: 1.3em;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }

        .info-list {
            padding-left: 20px;
        }

        .info-list li {
            margin-bottom: 10px;
            color: #fff;
        }

        .info-list a {
            color: #88d498;
            text-decoration: none;
            transition: color 0.3s;
            font-weight: 500;
        }

        .info-list a:hover {
            color: #fdbb2d;
            text-decoration: underline;
        }

        .close-btn {
            background: linear-gradient(135deg, #666 0%, #888 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: bold;
            margin-top: 10px;
        }

        /* Основные стили игры */
        h1 {
            color: #fdbb2d;
            text-align: center;
            margin-bottom: 10px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .authors {
            color: #88d498;
            text-align: center;
            margin-bottom: 10px;
            font-size: 1.1em;
            font-weight: bold;
            line-height: 1.4;
        }

        .subtitle {
            color: #ccc;
            text-align: center;
            margin-bottom: 10px;
            font-style: italic;
        }

        .description {
            color: #ddd;
            text-align: center;
            margin-bottom: 30px;
            font-size: 1em;
            line-height: 1.5;
            padding: 0 20px;
        }

        .day-info {
            background: linear-gradient(135deg, rgba(26, 42, 108, 0.8), rgba(178, 31, 31, 0.8));
            color: white;
            padding: 15px;
            border-radius: 15px;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.4);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .day-number {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .day-text {
            font-size: 1.1em;
            opacity: 0.9;
        }

        #image-container {
            margin: 20px auto;
            max-width: 300px;
            height: 200px;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
            background: rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            border: 3px solid #fdbb2d;
        }

        #task-image {
            max-width: 100%;
            max-height: 100%;
            object-fit: cover;
        }

        #task-container {
            background: rgba(255, 255, 255, 0.1);
            padding: 25px;
            border-radius: 15px;
            border-left: 5px solid #b21f1f;
            margin: 20px 0;
            min-height: 120px;
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.2);
            scroll-margin-top: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        #task-text {
            font-size: 1.3em;
            margin-bottom: 15px;
            font-weight: 500;
            line-height: 1.4;
            color: #fff;
        }

        #task-status {
            font-style: italic;
            color: #ccc;
            margin-top: 10px;
            min-height: 24px;
        }

        #wisdom-quote {
            color: #fdbb2d;
            font-style: italic;
            font-size: 1.1em;
            margin: 15px 0;
            padding: 15px;
            background: rgba(253, 187, 45, 0.1);
            border-radius: 10px;
            border-left: 3px solid #fdbb2d;
            font-weight: 500;
            line-height: 1.4;
        }

        #punishment-text {
            color: #ff6b6b;
            font-weight: bold;
            font-size: 1.1em;
            margin: 10px 0;
            min-height: 28px;
            animation: shake 0.5s ease-in-out;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        .buttons-container {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin: 20px 0;
        }

        button {
            border: none;
            padding: 15px 25px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1.1em;
            transition: all 0.3s ease;
            font-weight: bold;
            min-width: 200px;
            color: white;
        }

        #action-btn {
            background: linear-gradient(135deg, #1a2a6c 0%, #2c3e50 100%);
            box-shadow: 0 5px 15px rgba(26, 42, 108, 0.4);
        }

        #skip-btn {
            background: linear-gradient(135deg, #b21f1f 0%, #c0392b 100%);
            box-shadow: 0 5px 15px rgba(178, 31, 31, 0.4);
        }

        #reset-btn {
            background: linear-gradient(135deg, #666 0%, #888 100%);
            box-shadow: 0 5px 15px rgba(102, 102, 102, 0.4);
            min-width: 150px;
            font-size: 1em;
        }

        button:hover {
            transform: translateY(-2px);
        }

        #action-btn:hover {
            box-shadow: 0 8px 20px rgba(26, 42, 108, 0.6);
        }

        #skip-btn:hover {
            box-shadow: 0 8px 20px rgba(178, 31, 31, 0.6);
        }

        #reset-btn:hover {
            box-shadow: 0 8px 20px rgba(102, 102, 102, 0.6);
        }

        button:active {
            transform: translateY(0);
        }

        button:disabled {
            background: #cccccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        #stats {
            display: flex;
            justify-content: space-around;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 2px dashed rgba(255,255,255,0.2);
        }

        .stat-item {
            text-align: center;
            padding: 10px;
        }

        .stat-value {
            font-size: 2em;
            font-weight: bold;
            color: #fdbb2d;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }

        .completed {
            color: #88d498;
            font-weight: bold;
            font-size: 1.1em;
        }

        .task-counter {
            background: #b21f1f;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            display: inline-block;
            margin-bottom: 10px;
        }

        .sound-control {
            margin-top: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            color: #ccc;
            font-size: 0.9em;
        }

        .progress-container {
            margin: 20px 0;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            height: 20px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(135deg, #1a2a6c, #fdbb2d);
            border-radius: 10px;
            transition: width 0.5s ease;
            width: 0%;
        }

        .tomorrow-message {
            background: linear-gradient(135deg, rgba(253, 187, 45, 0.8), rgba(249, 212, 35, 0.8));
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            color: #333;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(253, 187, 45, 0.3);
        }

        .reset-section {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 2px dashed rgba(255,255,255,0.2);
        }

        /* Кнопка возврата на главную */
        .back-to-main {
            position: absolute;
            top: 20px;
            left: 20px;
            z-index: 3;
        }

        .back-btn {
            background: rgba(0,0,0,0.7);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
        }

        .back-btn:hover {
            background: rgba(0,0,0,0.9);
            transform: translateY(-2px);
        }
    </style>
</head>
<body>
    <!-- Видео-заставка с кнопками -->
    <div id="video-splash">
        <video id="splash-video" autoplay muted loop playsinline>
            <source src="https://github.com/krassa1883-pixel/-88/blob/525656e9fd8f2d5f82c0e1c03ab0b2e959fca319/generated_video_43fd78044fc749b99737a05997a86179.mp4?raw=true" type="video/mp4">
            Ваш браузер не поддерживает видео.
        </video>

        <div class="video-overlay">
            <div class="splash-subtitle">"Пусть каждый день будет трезвым"</div>
            <div class="splash-buttons">
                <button id="start-btn" class="splash-btn">🎮 Начать/продолжить игру</button>
                <button id="authors-btn" class="splash-btn">👥 Авторы</button>
                <button id="info-btn" class="splash-btn">📚 Полезная информация</button>
            </div>
        </div>
    </div>

    <!-- Модальное окно авторов -->
    <div id="authors-modal" class="modal">
        <div class="modal-content">
            <div class="authors-video-container">
                <video id="authors-video" autoplay muted loop playsinline>
                    <source src="https://github.com/krassa1883-pixel/-88/blob/9919377a22820f6b8990208d06cb02ea15888110/generated_video_0632b4b3aa39448dabce2c77df511ce3.mp4?raw=true" type="video/mp4">
                    Ваш браузер не поддерживает видео.
                </video>
                <div class="authors-overlay">
                    <h2 class="modal-title">Авторы проекта</h2>
                    <div class="authors-info">
                        <strong>Автор игры:</strong><br>
                        Ежевика 🍓<br><br>
                        
                        <strong>Электронная вёрстка:</strong><br>
                        Асмодей<br><br>
                        
                        <strong>Идея и концепция:</strong><br>
                        Программа "Sober Day"<br><br>
                        
                        <em>"Пусть каждый день будет трезвым"</em>
                    </div>
                    <button class="close-btn">Закрыть</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Модальное окно полезной информации -->
    <div id="info-modal" class="modal">
        <div class="modal-content">
            <div class="info-video-container">
                <video id="info-video" autoplay muted loop playsinline>
                    <source src="https://github.com/krassa1883-pixel/-88/blob/7bc950667021488162ad45c8543832922fb788e7/generated_video_79f037fdd7b44f438b6e46dddc43a952.mp4?raw=true" type="video/mp4">
                    Ваш браузер не поддерживает видео.
                </video>
                <div class="info-overlay">
                    <h2 class="modal-title">Полезная информация</h2>
                    <div class="info-content">
                        <div class="info-section">
                            <h3>Онлайн-ресурсы:</h3>
                            <ul class="info-list">
                                <li>Тест АУДИТ (на алкогольную зависимость) - <a href="https://ershovlabexpert.ru/test/test_audit" target="_blank">https://ershovlabexpert.ru/test/test_audit</a></li>
                                <li>ТГ Канал Алексея Решетуна (судмедэксперт) - <a href="https://t.me/reshetunalexey" target="_blank">https://t.me/reshetunalexey</a></li>
                                <li>Ютуб канал Василия Шурова (Врач психиатр-нарколог) - <a href="https://www.youtube.com/@user-ys3qj2jq6y" target="_blank">https://www.youtube.com/@user-ys3qj2jq6y</a></li>
                                <li>Ютуб канал Мориарти (Все, что нужно знать об АЛКОГОЛЕ. Почему я не пью?) - <a href="https://www.youtube.com/@moriarty_official" target="_blank">https://www.youtube.com/@moriarty_official</a></li>
                            </ul>
                        </div>
                        
                        <div class="info-section">
                            <h3>Литература:</h3>
                            <ul class="info-list">
                                <li>АЛЛЕН КАРР «Легкий способ бросить пить»</li>
                                <li>Марат Агинян «Зависимость и ее человек»</li>
                                <li>Денис Кравченков: «Я плюс алкоголь равно…Любовь до гроба?»</li>
                                <li>Стеценко О.В. «Как не пить»</li>
                                <li>Энни Грейс «В ясном уме»</li>
                                <li>Арсений Кайсаров «Золотое руководство к трезвости»</li>
                            </ul>
                        </div>
                    </div>
                    <button class="close-btn">Закрыть</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ОСНОВНОЙ КОНТЕНТ ИГРЫ (переделан в стиле модальных окон) -->
    <div class="game-container" id="game-container">
        <!-- Видео-фон для игры -->
        <div class="game-video-container">
            <video id="game-video" autoplay muted loop playsinline>
                <source src="https://github.com/krassa1883-pixel/-88/blob/9919377a22820f6b8990208d06cb02ea15888110/generated_video_e67f55b0b529433782fbaa083253d537.mp4?raw=true" type="video/mp4">
                Ваш браузер не поддерживает видео.
            </video>
        </div>

        <!-- Кнопка возврата на главную -->
        <div class="back-to-main">
            <button id="back-btn" class="back-btn">← На главную</button>
        </div>

        <!-- Основной контент игры -->
        <div class="game-overlay">
            <div class="game-content">
                <h1>🔥 Sober Day</h1>
                <div class="authors">
                    Автор игры: Ежевика 🍓<br>
                    Электронная вёрстка — Асмодей
                </div>
                <div class="subtitle">"Пусть каждый день будет трезвым"</div>
                <div class="description">
                    Это программа-помощник для тех, кто готов, или уже делает свои первые шаги в трезвую жизнь.<br><br>
                    ❤️ <strong>Цель программы:</strong> изменить зависимое от алкоголя мышление, которое потянет за собой изменение старых моделей поведения.<br><br>
                    Ежедневные задания будут удерживать правильный фокус на важных деталях.<br>
                    Фиксация внимания на этих аспектах поможет более комфортно пройти первые и самые сложные этапы пути.<br><br>
                    <strong>Работа иногда будет письменной – запаситесь тетрадью.</strong><br>
                    Если потребуется на каждое задание больше времени, то можно процесс немного растянуть. Главное – идти! Каждый день!
                </div>

                <div class="day-info">
                    <div class="day-number">День <span id="current-day">1</span> из 30</div>
                    <div class="day-text" id="day-status">Сегодняшнее задание</div>
                </div>

                <div class="progress-container">
                    <div class="progress-bar" id="progress-bar"></div>
                </div>
                
                <div id="image-container">
                    <img id="task-image" src="" alt="Изображение задания">
                </div>
                
                <div id="task-container">
                    <div id="task-text">Нажмите "Начать день", чтобы получить задание на сегодня!</div>
                    <div id="wisdom-quote"></div>
                    <div id="task-status"></div>
                    <div id="punishment-text"></div>
                </div>
                
                <div class="buttons-container">
                    <button id="action-btn">🎮 Начать день</button>
                    <button id="skip-btn" style="display: none;">😴 Не выполнил</button>
                </div>

                <div id="tomorrow-message" class="tomorrow-message" style="display: none;">
                    🎉 Отлично! Задание на сегодня выполнено!<br>
                    Возвращайся завтра для следующего задания.
                </div>

                <div class="sound-control">
                    <input type="checkbox" id="sound-toggle" checked>
                    <label for="sound-toggle">Включить звуки</label>
                    <span style="margin-left: 15px;">🔊 Громкость:</span>
                    <input type="range" id="volume-slider" min="0" max="100" value="50" style="width: 100px;">
                </div>
                
                <div id="stats">
                    <div class="stat-item">
                        <div>✅ Выполнено дней:</div>
                        <div class="stat-value" id="completed-count">0</div>
                    </div>
                    <div class="stat-item">
                        <div>📅 Всего дней:</div>
                        <div class="stat-value">30</div>
                    </div>
                    <div class="stat-item">
                        <div>📊 Прогресс:</div>
                        <div id="current-status">Ожидание...</div>
                    </div>
                </div>

                <div class="reset-section">
                    <button id="reset-btn">🔄 Сброс прогресса</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Элементы видео-заставки
        const videoSplash = document.getElementById('video-splash');
        const splashVideo = document.getElementById('splash-video');
        const startBtn = document.getElementById('start-btn');
        const authorsBtn = document.getElementById('authors-btn');
        const infoBtn = document.getElementById('info-btn');
        const gameContainer = document.getElementById('game-container');
        const backBtn = document.getElementById('back-btn');

        // Элементы модальных окон
        const authorsModal = document.getElementById('authors-modal');
        const infoModal = document.getElementById('info-modal');
        const closeModalBtns = document.querySelectorAll('.close-btn');
        const infoVideo = document.getElementById('info-video');
        const authorsVideo = document.getElementById('authors-video');

        // Видео для игры
        const gameVideo = document.getElementById('game-video');

        // Функция перехода к игре
        function startGame() {
            // Останавливаем видео заставки
            splashVideo.pause();
            
            // Плавное скрытие видео-заставки
            videoSplash.style.opacity = '0';
            setTimeout(() => {
                videoSplash.style.display = 'none';
                gameContainer.style.display = 'block';
                initGame();
            }, 500);
        }

        // Функция возврата на главную
        function backToMain() {
            // Останавливаем видео игры
            gameVideo.pause();
            
            // Плавное скрытие игры
            gameContainer.style.opacity = '0';
            setTimeout(() => {
                gameContainer.style.display = 'none';
                videoSplash.style.display = 'flex';
                videoSplash.style.opacity = '1';
                
                // Перезапускаем видео заставки
                splashVideo.play();
            }, 500);
        }

        // Функция показа модального окна авторов
        function showAuthorsModal() {
            authorsModal.style.display = 'flex';
            // Запускаем видео при открытии модального окна
            authorsVideo.play();
        }

        // Функция показа модального окна полезной информации
        function showInfoModal() {
            infoModal.style.display = 'flex';
            // Запускаем видео при открытии модального окна
            infoVideo.play();
        }

        // Функция скрытия модального окна
        function closeModal(modal) {
            modal.style.display = 'none';
            // Останавливаем видео при закрытии модального окна
            if (modal === infoModal) {
                infoVideo.pause();
            } else if (modal === authorsModal) {
                authorsVideo.pause();
            }
        }

        // Обработчики событий кнопок
        startBtn.addEventListener('click', startGame);
        authorsBtn.addEventListener('click', showAuthorsModal);
        infoBtn.addEventListener('click', showInfoModal);
        backBtn.addEventListener('click', backToMain);

        // Обработчики закрытия модальных окон
        closeModalBtns.forEach(btn => {
            btn.addEventListener('click', function() {
                const modal = this.closest('.modal');
                closeModal(modal);
            });
        });

        // Закрытие модальных окон при клике вне их
        [authorsModal, infoModal].forEach(modal => {
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    closeModal(modal);
                }
            });
        });

        // Обновленная база данных заданий (30 заданий) с юмористическими картинками
        const tasks = [
            { 
                text: "Сегодня нужно найти немного времени для важной работы. Включи любимое классическое произведение, или создай иной расслабляющий фон. Побудь немного в этом состоянии и напиши минимум 5 пунктов для чего тебе нужна трезвая жизнь. Истинно твои причины.", 
                image: "https://images.unsplash.com/photo-1511379938547-c1f69419868d?w=300&h=200&fit=crop"
            },
            { 
                text: "Выпиши все способы, которые ты ранее пробовал, чтоб завязать с алкоголем. Пробовал, но они не сработали. Например: Пытался взять аскезу, переходил на слабый алкоголь, пробовал пить только по выходным, осознанно уменьшал дозировку. Выпиши все, чтоб больше к этому не возвращаться и не повторять! Составь план работы, что ты будешь делать в этот раз? Напиши об этом пост в Собере. Решил пойти в АА, прочитать 1-2 книги с теорией, пересмотреть весь контент на Ютубе, и так далее. Другие результаты требуют новых действий.", 
                image: "https://images.unsplash.com/photo-1542037104857-ffbb0b9155fb?w=300&h=200&fit=crop"
            },
            { 
                text: "Выкинь из дома все, что напоминает тебе алкоголь. Очисти свое личное пространство. Это могут быть не только бутылки, но и подаренные бокалы, алкогольные аксессуары, приправы и даже штопор. Купи взамен что-то другое, красивое, приятное глазу и повышающее тебе настроение. С врагом не заигрывают – его уничтожают!", 
                image: "https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w=300&h=200&fit=crop"
            },
            { 
                text: "Напиши, какие вопросы помогал тебе решать алкоголь. От чего ты хочешь уйти c его помощью. Проведи с собой эту важную беседу, распутай этот клубок. Например, я хочу уйти от усталости, раздражительности, низкой самооценки, апатии, комплексов, сформированных и навязанных традиций. А теперь на каждый пункт пропиши другой маршрут, иные действия, но уже не в связке с алкоголем, а без него. Устал, значит теперь я высыпаюсь, возобновляю хобби, иду в парк, иду в сауну, на массаж. Начни применять это в жизни, строй новые нейронные связи.", 
                image: "https://images.unsplash.com/photo-1534536281715-e28d76689b4d?w=300&h=200&fit=crop"
            },
            { 
                text: "Найди в Собере в папке 'Год' любого человека, который тебя зацепит через свое повествование. Спустись по его дневнику вниз и прочитай весь его путь от и до! Сделай важные пометки для себя, попробуй что-то внедрить в свою жизнь тоже. Напиши этому человеку комментарий об этом!", 
                image: "https://images.unsplash.com/photo-1584308666744-24d5c474f2ae?w=300&h=200&fit=crop"
            },
            { 
                text: "Анализы и поддержка организма. Организм, делающий шаг в абсолютную трезвость, испытывает стресс и ему нужна поддержка. Купи себе витамины! 1. Группу В, для поддержания нервной системы. (например Нейромультивит). 2. Магний - для крепкого сна и спокойствия. 3. Витамин Д 2000 ед ( в жировых капсулах) для энергии. 4. Запланируй проверить в лаборатории ферритин и исключить анемию. По возможности сделай полный чек-ап.", 
                image: "https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=300&h=200&fit=crop"
            },
            { 
                text: "Мифы! Упражнение по обесцениванию! Алкоголь не расслабляет, а вызывает еще большее напряжение. Алкоголь не эликсир для мозга, а нейротоксин, который его убивает. Алкоголь не connection people, а совсем наоборот. Дальше продолжи сам. Напиши 10 мифов, в которые ты раньше верил и сформулируй этим мифам опровержение.", 
                image: "https://images.unsplash.com/photo-1541781774459-bb2af2f05b55?w=300&h=200&fit=crop"
            },
            { 
                text: "Устрой себе сегодня день сна! Можно лечь спать чуть раньше, если завтра на работу, можно встать чуть позднее, если задание выпало на выходной, а ещё поспать в обед! Да будет сон! Много сна! Это самое приятное задание. (Изучи правило HALT и постарайся его не нарушать).", 
                image: "https://images.unsplash.com/photo-1541336032412-2048a678540d?w=300&h=200&fit=crop"
            },
            { 
                text: "Напиши себе письмо в будущее (обычное или видео, видео будет круче!) Каким бы ты себя хотел видеть через год трезвости. Что бы ты хотел изменить в себе, своей жизни, каким ты видишь свое окружение? Готов ли ты сейчас вернуть забытое хобби? Мысли материальны, если точно понимать чего ты хочешь. Через год вернёшься и посмотришь насколько все совпало.", 
                image: "https://images.unsplash.com/photo-1576091160399-112ba8d25d1f?w=300&h=200&fit=crop"
            },
            { 
                text: "Пройди тест АУДИТ на алкогольную зависимость. (Гуглится). Запиши его в своем статусе Собера. Посмотри правде в глаза.", 
                image: "https://images.unsplash.com/photo-1450101499163-c8848c66ca85?w=300&h=200&fit=crop"
            },
            { 
                text: "Систематизация работы. Определи сам для себя периодичность ведения личного дневника в Собере. Это очень важно! Тот кто не работает со своими мыслями печатно или письменно, тот кто не держит нужный фокус, имеет более высокий риск все бросить и уйти в срыв! Пример: вторник и суббота! Чаще – можно, реже – нельзя! Забей напоминание на удобное время в телефон. Не пропускай записи, делай посты! Они могут быть очень краткими, но они должны быть. (Описывай свое текущее состояние и детали, этапы работы, что делаешь в настоящее время для своей трезвости).", 
                image: "https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=300&h=200&fit=crop"
            },
            { 
                text: "Письменная работа! Запиши какие сферы твоей жизни серьезно затронул алкоголь. Семья, друзья, работа, финансы, дети. Посмотри на все так как есть, если потребуется - посчитай убытки! Распиши все честно и максимально подробно, проведи аудит своей жизни по каждой статье отдельно. Сними маску с врага!", 
                image: "https://images.unsplash.com/photo-1495653797063-114787b77b23?w=300&h=200&fit=crop"
            },
            { 
                text: "Триггеры. Бывают такие ситуации, люди, события, которые активируют твою тягу. Постарайся вспомнить их все и выписать. Поработай с этим сейчас и постарайся найти обходные пути для каждого пункта или для большей части из них. Построй высокий забор вокруг своей трезвости! Например, избегать выпивающие компании в первое время, обходить алкомаркеты, не смотреть фильмы/соцсети и сериалы где постоянно в кадре пьют. Посади себя на карантин и будь на нем ровно столько времени, сколько потребуется. Ты почувствуешь, когда станешь сильнее и увереннее.", 
                image: "https://images.unsplash.com/photo-1511795409834-ef04bbd61622?w=300&h=200&fit=crop"
            },
            { 
                text: "Посмотри видео на Ютубе о вреде алкоголя. Или прочитай пару глав из книги, с антиалкогольной тематикой. Запиши важные тезисы, которые тебя тронули. Подумай о них, побудь с этими мыслями наедине.", 
                image: "https://images.unsplash.com/photo-1544367567-0f2fcb009e0b?w=300&h=200&fit=crop"
            },
            { 
                text: "Тяга и место ее возникновения. Попробуй определиться наперед, что ты будешь делать, если тяга тебя застанет: -Дома / На улице/ В гостях/ В командировке, или когда ты будешь один (что бывает часто). Составь список из 10 дел, которые тебя отвлекут, помогут расслабиться, заставят переключиться. Этот список нужен уже сейчас! Попробуй дополнительно засекать время и отслеживать длительность тяги (если она будет возникать).", 
                image: "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=300&h=200&fit=crop"
            },
            { 
                text: "Сегодня каждые 4 часа мы будем делать успокаивающую практику 'Дыхание по квадрату'. ( Она поможет активировать работу парасимпатического отдела НС). - Вдох 4 сек, -Выдох 4 сек. - Вдох 4 сек, - Выдох 4 сек. Повторяй несколько минут. Почувствуй эффект расслабления. Применяй это упражнение каждый раз, как только будет накатывать тяга.(она пройдет в этом случае гораздо быстрее).", 
                image: "https://images.unsplash.com/photo-1515562141207-7a88fb7ce338?w=300&h=200&fit=crop"
            },
            { 
                text: "Талисман. Найди какой-то яркий аксессуар ( кольцо, браслет, яркая нить или просто переодень часы на другую руку) и придай этому смысл. Каждый раз, глядя на этот аксессуар, ты будешь вспоминать о принятом тобой решении: быть трезвым сегодня!", 
                image: "https://images.unsplash.com/photo-1543269865-cbf427effbad?w=300&h=200&fit=crop"
            },
            { 
                text: "Напиши три развернутых комментария поддержки в Собере незнакомым людям. Поддерживаешь ты - поддерживают тебя. Запусти этот механизм в действие. Продолжай далее это делать постоянно.", 
                image: "https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=300&h=200&fit=crop"
            },
            { 
                text: "Попробуй смоделировать в голове самую сложную (страшная) ситуация, при которой ты бы раньше точно употребил алкоголь. Попробуй 'прокрутить пластинку вперёд' и обезопасить себя от старой модели снятия стресса. Запиши три самых действенных для тебя новых решения и храни их при себе, чтоб в нужный момент быть готовым к правильным действиям.", 
                image: "https://images.unsplash.com/photo-1511795409834-ef04bbd61622?w=300&h=200&fit=crop"
            },
            { 
                text: "Спланируй четко свое поведение на мероприятии, которое ты посетишь в ближайшем будущем: (неважно когда, план нужен уже сейчас!). Например: 1. Я приду туда со своим б/а вином, морсом, соком. 2. Если будут предлагать выпить ,буду говорить (сформулировать что). 3. Буду не до конца, уйду раньше обычного, если потребуется, то обозначу причину (таккую). Первые трезвые вечеринки это четкая организация. Если не готов идть – лучше откажись! Трезвость важнее!", 
                image: "https://images.unsplash.com/photo-1549465220-1a8b9238cd48?w=300&h=200&fit=crop"
            },
            { 
                text: "Запланируй себе подарок на определенный важный для тебя срок трезвости. Сэкономленные деньги от не выпитого алкоголя направь на положительное подкрепление. Это создаст дополнительную мотивацию. Это может быть неделя, месяц, год. Как только календарь покажет твою дату - выполни свое обещание и тут же устанавливай другую дату! 😊", 
                image: "https://images.unsplash.com/photo-1503676260728-1c00da094a0b?w=300&h=200&fit=crop"
            },
            { 
                text: "Установи параллельную цель, которую невозможно было достигнуть совместно с алкоголем. Например: подтянуть английский, изучить нужную программу/пройти курс, получить новую специальность, завести собаку и бегать с ней каждое утро. Прямо сегодня сделай первый шаг в достижении этой цели.", 
                image: "https://images.unsplash.com/photo-1576091160550-2173dba999ef?w=300&h=200&fit=crop"
            },
            { 
                text: "Визуализация! Подпишись на регулярный мотивирующий контент. Рекомендация ТГ канал судмеда Алексея Решетуна. «Mossudmed». Он не только расскажет, но и покажет органы тех, кто 'пьет как все' или 'я же не под забором валяюсь'. Например жировой гепатоз печени или заплывшее жиром сердце, перенесшее инфаркт. (Это может быть другой ресурс, но контент должен действовать и работать!).", 
                image: "https://images.unsplash.com/photo-1541781774459-bb2af2f05b55?w=300&h=200&fit=crop"
            },
            { 
                text: "Биоритмы! На этом этапе наверняка уже начали происходить улучшения твоего ночного сна. Пора сделать еще один шаг. Начни вставать всегда в одно и тоже время несмотря ни на что, (даже в выходные!). Сперва это будет трудно, но потом время и скорость засыпания начнут подстраиваться под нужный тебе график. Идеальное время для отбоя и выработки мелатонина с 22 до 1 ночи. (значит каждый день нужно будет вставать в 6-7 утра. (даже по выходным!) Если будет плохо получаться на первых порах, можно прибегнуть к магнию, глицину, витаминам группы B, или пропить 5- НТР. (Мелатонин лучше пить совсем в крайних случаях, когда все вышеуказанное не поможет). Если ситуация не разрешается – проконсультируйся со своим лечащим врачом.", 
                image: "https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=300&h=200&fit=crop"
            },
            { 
                text: "Активность! Если ты до сих пор этого не сделал, то сейчас самое время! Скачай любой шагомер себе в телефон/заряди фитнесс браслет и одень его. Начинай отслеживать среднее количество своих шагов в течении трех дней. Далее иди на вырост! Каждый день добавляй по 200-300 шагов в плюс к своей средней норме. Каждый день старайся побить свой рекорд! Даже + 100 шагов будет уже победой!", 
                image: "https://images.unsplash.com/photo-1542038784456-1ea8e935640e?w=300&h=200&fit=crop"
            },
            { 
                text: "Начни вести дневник благодарности! Каждый день, уделяй несколько минут для того чтоб сфокусироваться на положительных моментах и зафиксировать их письменно. Это может быть что-то крупное, как успех на работе, или простая приятная вечерняя прогулка, на которую ты пошел осознанно. Цель этой работы – сфокусироваться на положительном. Вытянуть себя из грустных состояний, не сосредотачиваться только на негативе и на своих проблемах. Ценить то что есть и радоваться каждому новому трезвому дню.", 
                image: "https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=300&h=200&fit=crop"
            },
            { 
                text: "«Здесь и сейчас!» Очень мощный психологический инструмент, помогающий при умелом и своевременном применении хорошо сбивать чувство тревоги и выдергивать себя из карусели надоедливых мыслей. В сложные периоды, когда будет накатывать чувство тревоги, и это чувство будет изматывающим и продолжительным, попробуй сосредоточиться на своем нахождении в моменте и подключить к этому все свои чувства. Задавай себе вопросы и отвечай на них: «Где я нахожусь», «Что я слышу», «Что я вижу», «До чего могу дотянуться рукой и к чему прикоснуться», «Назови все цвета которые ты видишь», «Какой аромат есть в воздухе?». Хорошо если все это будет совмещено с практикой дыхания вдох и более глубокий и длинный выдох. Это «выдернет» тебя в моменте из состояния тревоги и успокоит нервную систему. Практикуй! Это очень полезно делать и в обычном состоянии!", 
                image: "https://images.unsplash.com/photo-1542639130-c9fadbddcc6b?w=300&h=200&fit=crop"
            },
            { 
                text: "Разговор с зависимостью. (психологическое упражнение). Полезно делать когда накатывает тяга и как профилактика. Поставь перед собой пустой стул, представь что напротив тебя сидит твоя зависимость, Постарайся представить ее образ. Как она выглядит? Скажи ей все вслух! Все что ты о ней думаешь, что она сделала с твоей жизнью, можно с применением ненормативной лексики, можно послать, можно всё! Это очень крутая практика с выходом скопившихся внутри эмоций.", 
                image: "https://images.unsplash.com/photo-1576091160399-112ba8d25d1f?w=300&h=200&fit=crop"
            },
            { 
                text: "Мгновенная скорая помощь! Бывают такие ситуации, или возможно будут, когда накроет очень сильно, и тяга будет невыносимой! Давай придумаем заранее как можно будет себя укрепить и помочь себе переждать сложные моменты. Например: 1. Позвонить сразу наставнику или близкому человеку, который тебя поддерживает. 2. Написать об этом в Собер тут же. (напиши еще своих 3-5 пунктов), которые укрепят тебя и помогут не сдаться!", 
                image: "https://images.unsplash.com/photo-1541336032412-2048a678540d?w=300&h=200&fit=crop"
            },
            { 
                text: "Загляни далеко в будущее! Визуализируй себя трезвым через год, два года, пять лет, десять лет. Каким ты будешь? Что в тебе поменяется? Изменится ли твой характер? Будешь ли ты более ярко выражать себя, или наоборот уйдешь в тень и будешь вести тихую спокойную размеренную счастливую жизнь. Опиши себя письменно, составь портрет будущего себя! В любом случае твоя новая реальность должна тебе нравиться и пусть она воплотится в твою жизнь! Иди к ней смелее, ты хозяин своей жизни, и никто не сможет тебе помещать прожить твою жизнь так как, как ты хочешь!", 
                image: "https://images.unsplash.com/photo-1541336032412-2048a678540d?w=300&h=200&fit=crop"
            }
        ];

        // 100 ЦИТАТ ПРО ТРЕЗВОСТЬ И ВРЕД ПЬЯНСТВА
        const wisdomQuotes = [
            "🍃 «В стакане тонет больше людей, чем в море»",
            "💎 «Трезвость — сокровище, пьянство — бедствие»",
            "🌟 «Пьянство — это добровольное сумасшествие»",
            "🌱 «Хмельное всегда протягивает нам руку, когда мы терпим неудачу»",
            "⚡ «Вино входит — ум выходит»",
            "🕊️ «Трезвость — мать здоровья»",
            "🎯 «Пьяный — что малый: что у него на уме, то и на языке»",
            "🌄 «Утро вечера мудренее, а трезвая голова пьяной»",
            "🛡️ «Пьянство не рождает пороков: оно их обнаруживает»",
            "🌻 «Счастлив тот, кто вином не увлекается»",
            "🚫 «Кто вино любит, тот сам себя губит»",
            "💫 «Пьянство — это искушение, трезвость — победа»",
            "🌈 «Трезвый ум — ясные мысли, чистые помыслы»",
            "🎭 «В вине горе топят — беду выращивают»",
            "🌊 «Река с истока начинается, пьянство с рюмки»",
            "🔥 «Огонь тушат, пока не разгорелся, пьянство лечат, пока не окрепло»",
            "💪 «Силен не тот, кто победил тысячу войск, а тот, кто победил самого себя»",
            "🦅 «Лучше быть орлом на земле, чем пьяницей в раю»",
            "🌳 «Дерево смотри в плодах, а человека в делах»",
            "🎊 «Трезвая жизнь — ясный ум, крепкое здоровье, счастливая семья»",
            "🌅 «У трезвого утро бодрое, у пьяного — тяжелое»",
            "🔄 «Пьянство — это путь в никуда, трезвость — дорога к себе»",
            "🌺 «Цветы жизни не растут в винном погребе»",
            "⚖️ «Вино весы правосудия нарушает»",
            "🕯️ «Пьянство гасит свет разума»",
            "🏔️ «Трезвость — вершина, с которой видно все жизненные перспективы»",
            "🌀 «В вихре пьянства теряется личность»",
            "🎨 «Трезвая жизнь — это искусство быть счастливым»",
            "🔍 «Пьяный не видит пропасти перед собой»",
            "🌉 «Трезвость — мост между мечтой и реальностью»",
            "⏳ «Время, проведенное в пьянстве, никогда не вернется»",
            "💡 «Трезвый ум — источник мудрости»",
            "🛣️ «Дорога трезвости ведет к успеху»",
            "🎁 «Трезвость — лучший подарок самому себе»",
            "🌌 «В пьяном угаре тускнеют звезды таланта»",
            "🕊️ «Трезвость дарит крылья свободы»",
            "🔐 «Пьянство запирает душу в темнице»",
            "🌄 «Каждое трезвое утро — новый шанс»",
            "💞 «Трезвость сохраняет любовь и уважение близких»",
            "🎵 «Трезвая жизнь — это музыка души»",
            "🏆 «Победить алкоголь — значит победить себя»",
            "🌊 «Пьянство — это водоворот, затягивающий на дно»",
            "☀️ «Трезвое утро ярче пьяного вечера»",
            "📚 «Пьянство вырывает страницы из книги жизни»",
            "🔄 «Каждый трезвый день — шаг к новой жизни»",
            "💎 «Трезвость — алмаз, шлифующий характер»",
            "🌳 «Пьянство подрубает корни семейного древа»",
            "🎯 «Трезвый взгляд видит цель яснее»",
            "⚓ «Трезвость — якорь в бурном море жизни»",
            "🌈 «После дождя пьянства всегда наступает радуга трезвости»",
            "🕰️ «Пьянство крадет время, трезвость его умножает»",
            "🌟 «В трезвости рождаются звезды великих дел»",
            "🌷 «Трезвость — цветок, расцветающий в саду души»",
            "⚡ «Алкоголь — это молния, поражающая разум»",
            "🏔️ «Трезвость — это восхождение к вершинам себя»",
            "🔑 «Трезвость — ключ от всех дверей»",
            "🎭 «Пьянство — это маска, скрывающая настоящего человека»",
            "🌅 «Трезвый встречает рассвет, пьяный — похмелье»",
            "💼 «Трезвость строит карьеру, пьянство ее рушит»",
            "❤️ «Трезвое сердце бьется ровнее и любит сильнее»",
            "🌊 «Пьянство — это шторм, трезвость — штиль»",
            "🎨 «Трезвая жизнь — это холст, на котором ты художник»",
            "🛡️ «Трезвость — щит от жизненных невзгод»",
            "🌌 «В трезвом небе ярче светят звезды надежды»",
            "📖 «Пьянство — это книга с пустыми страницами»",
            "🌀 «Алкоголь — это воронка, засасывающая мечты»",
            "🏆 «Трезвость — это победа каждый день»",
            "🌄 «У трезвого человека каждый день — восход»",
            "💫 «Пьянство гасит искру гениальности»",
            "🌈 «Трезвость раскрашивает жизнь яркими красками»",
            "🔍 «В трезвости яснее видишь путь»",
            "🌳 «Пьянство — это сорняк на поле жизни»",
            "⚖️ «Трезвость восстанавливает справедливость в душе»",
            "🎁 «Трезвый день — это подарок судьбы»",
            "🌊 «Пьянство — это цунами, смывающее все хорошее»",
            "💡 «Трезвый ум — это фонарь в темноте»",
            "🛣️ «Дорога трезвости вымощена добрыми делами»",
            "🎵 «Трезвая жизнь — это симфония успеха»",
            "🌅 «Пьянство — это закат, трезвость — рассвет»",
            "💎 «Трезвость оттачивает алмаз личности»",
            "🕊️ «В трезвости душа обретает крылья»",
            "🌟 «Каждый трезвый день — это звезда на небе жизни»",
            "🌷 «Трезвость — это сад, где растут цветы счастья»",
            "⚡ «Алкоголь — это короткое замыкание разума»",
            "🏔️ «Трезвость — это Эверест самопознания»",
            "🔑 «Трезвость открывает дверь в мир возможностей»",
            "🎭 «В трезвости ты — автор своей пьесы»",
            "🌄 «Трезвый человек встречает утро с улыбкой»",
            "💼 «Трезвость — это капитал успеха»",
            "❤️ «Трезвое сердце любит и ценит жизнь»",
            "🌊 «Пьянство — это омут, трезвость — берег»",
            "🎨 «Трезвая жизнь — это шедевр, который ты создаешь»",
            "🛡️ «Трезвость — это доспехи воина духа»",
            "🌌 «В трезвой вселенной ярче горят звезды мечты»",
            "📖 «Трезвость — это книга с увлекательным сюжетом»",
            "🌀 «Пьянство — это торнадо, разрушающий все на пути»",
            "🏆 «Трезвость — это олимпийская медаль в жизни»",
            "🌄 «Каждое трезвое утро — это новая глава»",
            "💫 «Трезвость зажигает звезды таланта»",
            "🌈 «Пьянство — это туча, трезвость — радуга»",
            "🔍 «Трезвый взгляд видит возможности там, где пьяный — препятствия»"
        ];

        // Шутливые тексты за пропуск задания
        const punishmentTexts = [
            "Эх, безответственность! Даже Ежевика расстроилась 🍓",
            "Пропустил задание? На тебе ягодку от Ежевики! 🍓",
            "Так нельзя! Ты же обещал быть ответственным!",
            "Ежевика хмурится и качает головой... 🍓",
            "Пропуск задания? Начисляем штрафные ягодки!",
            "Твоя совесть должна быть тяжелее пропущенного задания!",
            "Ежевика верит, что в следующий раз ты справишься!",
            "Пропустил? Придется ответить перед судом ягод!",
            "Безответственность обнаружена! Активируем режим стыда!",
            "Ежевика записывает это в свою книгу нарушений 📝"
        ];

        // Игровые переменные
        let currentDay = 1;
        let completedDays = 0;
        let currentTask = null;
        let taskCompleted = false;

        // Элементы DOM
        const taskTextElement = document.getElementById('task-text');
        const taskStatusElement = document.getElementById('task-status');
        const wisdomQuoteElement = document.getElementById('wisdom-quote');
        const punishmentTextElement = document.getElementById('punishment-text');
        const actionBtn = document.getElementById('action-btn');
        const skipBtn = document.getElementById('skip-btn');
        const resetBtn = document.getElementById('reset-btn');
        const completedCountElement = document.getElementById('completed-count');
        const currentStatusElement = document.getElementById('current-status');
        const taskImageElement = document.getElementById('task-image');
        const currentDayElement = document.getElementById('current-day');
        const dayStatusElement = document.getElementById('day-status');
        const progressBar = document.getElementById('progress-bar');
        const tomorrowMessage = document.getElementById('tomorrow-message');
        const soundToggle = document.getElementById('sound-toggle');
        const volumeSlider = document.getElementById('volume-slider');
        const taskContainer = document.getElementById('task-container');

        // Audio Context для генерации звуков
        let audioContext;
        let volume = 0.3;

        // Инициализация Audio Context
        function initAudio() {
            try {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
                console.log("Audio Context инициализирован");
            } catch (e) {
                console.log("Web Audio API не поддерживается:", e);
            }
        }

        // Функция для генерации звука
        function playBeep(frequency, duration, type = 'sine') {
            if (!audioContext || !soundToggle.checked) return;
            
            try {
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.value = frequency;
                oscillator.type = type;
                
                gainNode.gain.setValueAtTime(0, audioContext.currentTime);
                gainNode.gain.linearRampToValueAtTime(volume, audioContext.currentTime + 0.01);
                gainNode.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + duration / 1000);
                
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + duration / 1000);
            } catch (e) {
                console.log("Ошибка воспроизведения звука:", e);
            }
        }

        // Звуки для игры
        function playSuccessSound() {
            playBeep(523, 150); // До
            setTimeout(() => playBeep(659, 150), 150); // Ми
            setTimeout(() => playBeep(784, 300), 300); // Соль
        }

        function playCompleteSound() {
            playBeep(784, 200); // Соль
            setTimeout(() => playBeep(659, 200), 200); // Ми
            setTimeout(() => playBeep(523, 400), 400); // До
        }

        function playClickSound() {
            playBeep(800, 50);
        }

        function playSkipSound() {
            playBeep(200, 300, 'square');
        }

        function playResetSound() {
            playBeep(400, 100);
            setTimeout(() => playBeep(300, 100), 100);
            setTimeout(() => playBeep(200, 200), 200);
        }

        // Функция для получения случайной цитаты
        function getRandomWisdomQuote() {
            const randomIndex = Math.floor(Math.random() * wisdomQuotes.length);
            return wisdomQuotes[randomIndex];
        }

        // Функция для плавной прокрутки к элементу
        function scrollToElement(element) {
            const elementPosition = element.getBoundingClientRect().top;
            const offsetPosition = elementPosition + window.pageYOffset - 100;
            
            window.scrollTo({
                top: offsetPosition,
                behavior: 'smooth'
            });
        }

        // Функция для обновления прогресса
        function updateProgress() {
            const progress = ((currentDay - 1) / tasks.length) * 100;
            progressBar.style.width = `${progress}%`;
        }

        // Функция для загрузки состояния из localStorage
        function loadGameState() {
            const savedState = localStorage.getItem('soberDayGame');
            if (savedState) {
                const state = JSON.parse(savedState);
                currentDay = state.currentDay || 1;
                completedDays = state.completedDays || 0;
                
                if (currentDay > tasks.length) {
                    currentDay = tasks.length;
                }
            }
            updateProgress();
            completedCountElement.textContent = completedDays;
            currentDayElement.textContent = currentDay;
        }

        // Функция для сохранения состояния в localStorage
        function saveGameState() {
            const state = {
                currentDay: currentDay,
                completedDays: completedDays,
                lastPlayed: new Date().toISOString()
            };
            localStorage.setItem('soberDayGame', JSON.stringify(state));
        }

        // Функция сброса игры
        function resetGame() {
            if (confirm("Вы уверены, что хотите сбросить весь прогресс и начать заново?")) {
                playResetSound();
                
                currentDay = 1;
                completedDays = 0;
                currentTask = null;
                taskCompleted = false;
                
                // Сбрасываем отображение
                taskTextElement.textContent = "Нажмите 'Начать день', чтобы получить задание на сегодня!";
                taskStatusElement.textContent = "";
                wisdomQuoteElement.style.display = 'none';
                punishmentTextElement.style.display = 'none';
                actionBtn.textContent = "🎮 Начать день";
                actionBtn.disabled = false;
                skipBtn.style.display = 'none';
                completedCountElement.textContent = "0";
                currentDayElement.textContent = "1";
                currentStatusElement.textContent = "Ожидание...";
                dayStatusElement.textContent = "Сегодняшнее задание";
                tomorrowMessage.style.display = 'none';
                
                // Очищаем изображение
                taskImageElement.src = "";
                
                // Обновляем прогресс
                updateProgress();
                
                // Удаляем сохраненное состояние
                localStorage.removeItem('soberDayGame');
                
                // Прокручиваем к верху
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
                
                setTimeout(() => {
                    alert("Прогресс сброшен! Вы можете начать игру заново.");
                }, 500);
            }
        }

        // Функция для получения случайного наказания
        function getRandomPunishment() {
            const randomIndex = Math.floor(Math.random() * punishmentTexts.length);
            return punishmentTexts[randomIndex];
        }

        // Основная функция обработки действий
        function handleAction() {
            playClickSound();
            
            if (!currentTask) {
                startDay();
            } else if (!taskCompleted) {
                completeTask();
            } else {
                showTomorrowMessage();
            }
        }

        // Функция пропуска задания
        function skipTask() {
            playSkipSound();
            
            if (currentTask && !taskCompleted) {
                punishmentTextElement.textContent = getRandomPunishment();
                punishmentTextElement.style.display = 'block';
                skipBtn.style.display = 'none';
                taskStatusElement.innerHTML = '<span style="color: #b21f1f;">Задание пропущено. Возвращайся завтра!</span>';
                actionBtn.textContent = "🔄 Вернуться завтра";
                taskCompleted = true;
                currentStatusElement.textContent = "День пропущен";
                
                setTimeout(() => {
                    punishmentTextElement.style.display = 'none';
                }, 3000);
            }
        }

        // Начало дня
        function startDay() {
            if (currentDay <= tasks.length) {
                currentTask = tasks[currentDay - 1];
                updateTaskDisplay();
                
                // Показываем случайную мудрую цитату
                wisdomQuoteElement.textContent = getRandomWisdomQuote();
                wisdomQuoteElement.style.display = 'block';
                
                taskStatusElement.textContent = "Задание на сегодня. Выполни его!";
                actionBtn.textContent = "✅ Задание выполнено!";
                skipBtn.style.display = 'block';
                currentStatusElement.textContent = "Выполнение задания";
                taskCompleted = false;
                punishmentTextElement.style.display = 'none';
                tomorrowMessage.style.display = 'none';
                dayStatusElement.textContent = "Сегодняшнее задание";
                
                // Прокручиваем к заданию
                setTimeout(() => {
                    scrollToElement(taskContainer);
                }, 300);
                
                playSuccessSound();
            } else {
                endGame();
            }
        }

        // Завершение задания
        function completeTask() {
            playCompleteSound();
            
            completedDays++;
            completedCountElement.textContent = completedDays;
            
            taskStatusElement.innerHTML = '<span class="completed">🎉 Задание выполнено! Отличная работа!</span>';
            actionBtn.textContent = "⭐ Задание завершено";
            skipBtn.style.display = 'none';
            taskCompleted = true;
            currentStatusElement.textContent = "День завершен";
            punishmentTextElement.style.display = 'none';
            
            currentDay++;
            currentDayElement.textContent = currentDay;
            
            saveGameState();
            updateProgress();
            
            if (currentDay <= tasks.length) {
                showTomorrowMessage();
            } else {
                endGame();
            }
        }

        // Показать сообщение о завтрашнем задании
        function showTomorrowMessage() {
            if (currentDay <= tasks.length) {
                tomorrowMessage.style.display = 'block';
                tomorrowMessage.innerHTML = `🎉 Отлично! Задание на день ${currentDay - 1} выполнено!<br>
                Возвращайся завтра для задания дня ${currentDay}.`;
                
                // Прокручиваем к сообщению
                setTimeout(() => {
                    scrollToElement(tomorrowMessage);
                }, 300);
            }
        }

        // Обновление отображения задания
        function updateTaskDisplay() {
            taskTextElement.textContent = currentTask.text;
            taskImageElement.src = currentTask.image;
        }

        // Завершение игры
        function endGame() {
            playCompleteSound();
            
            taskTextElement.textContent = "🎊 Поздравляем! Вы прошли все 30 дней программы! Ты молодец! Первый важный этап пройден! Не прекращай работу над собой и пусть эта работа обязательно принесет тебе плоды! Будь трезв и счастлив!";
            wisdomQuoteElement.style.display = 'none';
            taskStatusElement.textContent = `Игра завершена. Результат: ${completedDays} дней выполнено из ${tasks.length}`;
            actionBtn.disabled = true;
            actionBtn.textContent = "🏆 Программа пройдена!";
            skipBtn.style.display = 'none';
            currentStatusElement.textContent = "Завершено";
            tomorrowMessage.style.display = 'none';
            dayStatusElement.textContent = "Программа завершена!";
            progressBar.style.width = '100%';
        }

        // Инициализация игры
        function initGame() {
            initAudio();
            loadGameState();
            
            // Обновляем громкость при изменении слайдера
            volumeSlider.addEventListener('input', function() {
                volume = this.value / 100;
            });

            if (currentDay > 1) {
                if (currentDay <= tasks.length) {
                    taskTextElement.textContent = `Готов к заданию дня ${currentDay}?`;
                    taskStatusElement.textContent = `Выполнено дней: ${completedDays}. Нажми "Начать день" для продолжения.`;
                } else {
                    endGame();
                }
            }
            
            updateProgress();
        }

        // Назначение обработчиков событий
        actionBtn.addEventListener('click', handleAction);
        skipBtn.addEventListener('click', skipTask);
        resetBtn.addEventListener('click', resetGame);
    </script>
</body>
</html>